
<!DOCTYPE html>
<html lang="en">
<head>
  <a href="/index.html">I'm Done.</a>
<meta charset="UTF-8">
<title>X-Y-Z Axial</title>
<style>
/* Global */
body {
  height: 100vh;
  margin: 0;
  background: #000000;
  overflow: hidden;
}

/* Box */
#box {
  position: relative;
  height: 100%;
  top: 50%;
  left: 50%;
  perspective: 9999px;
  transform-style: preserve-3d;
  transform: translate(-50%, -50%) rotateX(10deg);
  transition: 2s cubic-bezier(0.2, 0.9, 0.3, 1.3);
  cursor: pointer;
}

/* Layers */
.layer {
  position: absolute;
  width: 130%;
  height: 130%;
  top: 50%;
  left: 50%;
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  transition: ease .5s;
  animation: load 1.4s forwards;
  opacity: 0;
}

.layer:nth-child(1) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(20px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-1.png");
  animation-delay: 0.2s;
}

.layer:nth-child(2) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(40px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-2.png");
  animation-delay: 0.4s;
}

.layer:nth-child(3) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(60px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-3.png");
  animation-delay: 0.6s;
}

.layer:nth-child(4) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(80px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-4.png");
  animation-delay: 0.8s;
}

.layer:nth-child(5) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(100px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-5.png");
  animation-delay: 1s;
}

.layer:nth-child(6) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(120px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-6.png");
  animation-delay: 1.2s;
}

.layer:nth-child(7) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(140px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-7.png");
  animation-delay: 1.4s;
}

.layer:nth-child(8) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(160px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-8.png");
  animation-delay: 1.6s;
}

.layer:nth-child(9) {
  transform: translate(-50%, -50%) rotateZ(0deg) translateZ(180px);
  background-image: url("http://tobiasbogliolo.com/docs/codepen/assets/img/layer-9.png");
  animation-delay: 1.8s;
}

.layer-toggle {
  width: 80%;
  height: 80%;
}

/* Load layers */
@keyframes load {
  to {
    opacity: 1;
  }
}
</style>
<script>
  window.console = window.console || function(t) {};
</script>
<script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>
</head>
<body translate="no">
<div id="box">
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
<div class="layer"></div>
</div>
<script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-157cd5b220a5c80d4ff8e0e70ac069bffd87a61252088146915e8726e5d9f147.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script id="rendered-js">
/*
===============================================================

Hi! Welcome to my little playground!

My name is Tobias Bogliolo. 'Open source' by default and always 'responsive',
I'm a publicist, visual designer and frontend developer based in Barcelona. 

Here you will find some of my personal experiments. Sometimes usefull,
sometimes simply for fun. You are free to use them for whatever you want 
but I would appreciate an attribution from my work. I hope you enjoy it.

===============================================================
*/

//Throttle:
var throttleOn = false;
var actionLock = false;
var throttleTimer = 100;

function throttle(e) {
  if (throttleOn) {
    actionLock = true;
  };
  if (!actionLock) {
    throttleOn = true;
    setTimeout(function () {
      throttleOn = false;
    }, throttleTimer);
    translate(e);
  };
  actionLock = false;
};

//Tracking effect:
var threshold = 20;
var box = $("#box");

function translate(e) {
  var xOrigin = box.width() / 2;
  var yOrigin = box.height() / 2;
  var xPivot = (e.clientY - yOrigin) / yOrigin * -threshold;
  var yPivot = (e.clientX - xOrigin) / xOrigin * threshold;
  box.css({
    'transform': 'translate(-50%, -50%) rotateX(' + xPivot + 'deg) rotateY(' + yPivot + 'deg)' });

};

//Handler:
$(window).mousemove(function (e) {
  throttle(e);
});

//Toggle:
$(document).click(function () {
  $('.layer').toggleClass('layer-toggle');
});
//# sourceURL=pen.js
    </script>
</body>
</html>
